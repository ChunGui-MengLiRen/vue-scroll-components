(function(t,v){typeof exports=="object"&&typeof module<"u"?module.exports=v(require("vue")):typeof define=="function"&&define.amd?define(["vue"],v):(t=typeof globalThis<"u"?globalThis:t||self,t.vueScrollComponents=v(t.Vue))})(this,function(t){"use strict";const v="",N=(o,f)=>{const s=o.__vccOpts||o;for(const[l,e]of f)s[l]=e;return s},T={key:0,class:"slot-data-copy"},y=N({__name:"vue3ScrollComponent",props:{scroll:{type:Boolean,default:!0},speed:{type:Number,default:1},data:{type:Array,default:()=>[]},type:{type:String,default:"seamless"},options:{type:Object,default:()=>({direction:"up",rem:!1,hover:!0,singleStep:0,singleWaitTime:1e3,navStep:30,navEase:"linear",navDelay:400})}},emits:["update:scroll","update:speed","dataUpdate","scrollEnd"],setup(o,{expose:f,emit:s}){const l=o,e=t.reactive({x:0,y:0,width:0,height:0,boxWidth:0,boxHeight:0,stop:!1,reqFrame:null,timer:null,singleLength:0}),g=t.ref(null),x=t.ref(null),a=t.computed(()=>({direction:"up",rem:!1,hover:!0,singleStep:0,singleWaitTime:1e3,navStep:30,navEase:"linear",navDelay:400,...l.options})),S=t.computed(()=>r.value?e.x<0:e.y<0),w=t.computed(()=>{const n=Math.abs(e.x),u=Math.abs(e.y);return r.value?e.width-e.boxWidth-n>0:e.height-e.boxHeight-u>0}),z=t.computed(()=>({display:r.value?"flex":"block",transform:`translate3d(${e.x}px,${e.y}px,0px)`,transition:l.type=="navigation"?`all ${a.value.navEase} ${a.value.navDelay}ms`:"none"})),r=t.computed(()=>a.value.direction==="left"||a.value.direction==="right"),b=t.computed(()=>l.type=="seamless"&&l.scroll),d=t.computed(()=>{const n=a.value.rem?parseInt(window.getComputedStyle(document.documentElement,null).fontSize):1;return a.value.singleStep*n}),i=t.computed(()=>{const n=a.value.rem?parseInt(window.getComputedStyle(document.documentElement,null).fontSize):1;return a.value.navStep*n}),c=t.computed(()=>{const n=d.value,u=l.speed;return n>0&&n%u>0&&console.error("单步滚动时speed需是singleStep的约数,否则无法保证单步滚动结束的位置的准确性。"),u}),k=()=>{S.value&&(r.value?Math.abs(e.x)<i.value?e.x=0:e.x+=i.value:Math.abs(e.y)<i.value?e.y=0:e.y+=i.value)},C=()=>{w.value&&(r.value?e.width-e.boxWidth+e.x<i.value?e.x=e.boxWidth-e.width:e.x-=i.value:e.height-e.boxHeight+e.y<i.value?e.y=e.boxHeight-e.height:e.y-=i.value)},V=()=>{t.nextTick(()=>{e.boxWidth=g.value.offsetWidth,e.boxHeight=g.value.offsetHeight,e.width=x.value.offsetWidth,e.height=x.value.offsetHeight,b.value?m():(p(),e.x=e.y=0)})},m=()=>{e.stop||(p(),e.reqFrame=window.requestAnimationFrame(()=>{const{direction:n,singleWaitTime:u}=a.value,E=e.width,_=e.height;switch(n){case"up":Math.abs(e.y)>=_&&(s("scrollEnd"),e.y=0),e.y-=c.value,d.value&&(e.singleLength+=c.value);break;case"down":e.y>=0&&(s("scrollEnd"),e.y=_*-1),e.y+=c.value,d.value&&(e.singleLength+=c.value);break;case"left":Math.abs(e.x)>=E&&(s("scrollEnd"),e.x=0),e.x-=c.value,d.value&&(e.singleLength+=c.value);break;case"right":e.x>=0&&(s("scrollEnd"),e.x=E*-1),e.x+=c.value,d.value&&(e.singleLength+=c.value)}d.value?(e.timer&&clearTimeout(e.timer),e.singleLength>=d.value?(e.singleLength=0,e.timer=setTimeout(()=>{m()},u)):m()):m()}))},p=()=>{window.cancelAnimationFrame&&window.cancelAnimationFrame(e.reqFrame||"")},W=()=>{e.stop=!1,m()},L=()=>{e.stop=!0,e.timer&&clearTimeout(e.timer),p()},M=()=>{b.value&&a.value.hover&&L()},B=()=>{b.value&&a.value.hover&&W()},h=()=>{p(),clearTimeout(e.timer),V()};return f({resetScroll:h,prevClick:k,nextClick:C}),t.watch(()=>l.scroll,async n=>{l.type!="navigation"&&(n?h():(p(),clearTimeout(e.timer)))}),t.watch(()=>l.data,async n=>{l.type!="navigation"&&(s("dataUpdate"),h())},{deep:!0}),t.watch(()=>l.speed,async n=>{l.type!="navigation"&&n&&h()}),t.onMounted(()=>{h()}),t.onBeforeUnmount(()=>{p(),clearTimeout(e.timer)}),(n,u)=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["scroll-wrap",t.unref(r)?"scroll-wrap-row":"scroll-wrap-col"])},[o.type=="navigation"?t.renderSlot(n.$slots,"prev",{key:0,prevClick:k,prevState:t.unref(S)},()=>[t.createElementVNode("div",{class:t.normalizeClass([t.unref(S)?"nav-wrap":"nav-wrap-disabled"]),onClick:k},[t.createElementVNode("div",{class:t.normalizeClass(["nav-box",t.unref(r)?"nav-prev-row":"nav-prev-col"])},null,2)],2)],!0):t.createCommentVNode("",!0),t.createElementVNode("div",{ref_key:"scrollBox",ref:g,class:"scroll-box"},[t.createElementVNode("div",{style:t.normalizeStyle(t.unref(z)),onMouseenter:M,onMouseleave:B},[t.createElementVNode("div",{ref_key:"scrollList",ref:x,class:"slot-data"},[t.renderSlot(n.$slots,"default",{},void 0,!0)],512),o.type=="seamless"?(t.openBlock(),t.createElementBlock("div",T,[t.renderSlot(n.$slots,"default",{},void 0,!0)])):t.createCommentVNode("",!0)],36)],512),o.type=="navigation"?t.renderSlot(n.$slots,"next",{key:1,nextClick:C,nextState:t.unref(w)},()=>[t.createElementVNode("div",{class:t.normalizeClass([t.unref(w)?"nav-wrap":"nav-wrap-disabled"]),onClick:C},[t.createElementVNode("div",{class:t.normalizeClass(["nav-box",t.unref(r)?"nav-next-row":"nav-next-col"])},null,2)],2)],!0):t.createCommentVNode("",!0)],2))}},[["__scopeId","data-v-c2569f26"]]);return y.install=(o,f={})=>{o.component(f.componentName||vueScroll.name,y)},y});
//# sourceMappingURL=vueScrollComponents-umd.js.map
